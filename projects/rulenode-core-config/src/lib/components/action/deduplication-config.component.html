<section [formGroup]="deduplicationConfigForm" fxLayout="column">
  <mat-form-field class="mat-block"  style="padding-bottom: 16px;">
    <mat-label>{{'tb.rulenode.interval' | translate}}</mat-label>
    <input type = 'number' required matInput formControlName="interval">
    <mat-hint>{{'tb.rulenode.interval-hint' | translate}}</mat-hint>
    <mat-error *ngIf="deduplicationConfigForm.get('interval').hasError('required')">
      {{'tb.rulenode.interval-required' | translate}}
    </mat-error>
    <mat-error *ngIf="deduplicationConfigForm.get('interval').hasError('min')">
      {{'tb.rulenode.interval-min-error' | translate}}
    </mat-error>
  </mat-form-field>
  <mat-form-field class="mat-block" style="padding-bottom: 16px;">
    <mat-label>{{'tb.rulenode.strategy' | translate}}</mat-label>
    <mat-select formControlName="strategy" required>
      <mat-option *ngFor="let strategy of deduplicationStrategies" [value]="strategy.value">
        {{strategy.name}}
      </mat-option>
    </mat-select>
    <mat-hint *ngIf="deduplicationConfigForm.get('strategy').value === 'ALL'" innerHTML="{{'tb.rulenode.strategy-all-hint' | translate}}"></mat-hint>
    <mat-hint *ngIf="deduplicationConfigForm.get('strategy').value === 'FIRST'">{{'tb.rulenode.strategy-first-hint' | translate}}</mat-hint>
    <mat-hint *ngIf="deduplicationConfigForm.get('strategy').value === 'LAST'">{{'tb.rulenode.strategy-last-hint' | translate}}</mat-hint>
    <mat-error *ngIf="deduplicationConfigForm.get('strategy').hasError('required')">
      {{'tb.rulenode.strategy-required' | translate}}
    </mat-error>
  </mat-form-field>
  <div  *ngIf="deduplicationConfigForm.get('strategy').value === 'ALL'">
    <tb-output-message-type-autocomplete
      style="margin-bottom: 16px; display: block;"
      formControlName="outMsgType"
      autocompleteHint="tb.rulenode.output-msg-type-hint">
    </tb-output-message-type-autocomplete>
    <tb-queue-autocomplete
      required
      style="margin-bottom: 16px; display: block;"
      [queueType]="serviceType"
      formControlName="queueName"
      autocompleteHint="tb.rulenode.queue-name-hint">
    </tb-queue-autocomplete>
  </div>
  <mat-expansion-panel class="advanced-settings">
    <mat-expansion-panel-header style="height: 48px;">
      <mat-panel-title>
        <div fxFlex fxLayout="row" fxLayoutAlign="end center">
          <div class="tb-small">Advanced settings</div>
        </div>
      </mat-panel-title>
    </mat-expansion-panel-header>
    <ng-template matExpansionPanelContent>
      <mat-form-field class="mat-block" style="padding-bottom: 16px;">
        <mat-label>{{'tb.rulenode.max-pending-msgs' | translate}}</mat-label>
        <input type = 'number' required matInput formControlName="maxPendingMsgs">
        <mat-hint>{{'tb.rulenode.max-pending-msgs-hint' | translate}}</mat-hint>
        <mat-error *ngIf="deduplicationConfigForm.get('maxPendingMsgs').hasError('required')">
          {{'tb.rulenode.max-pending-msgs-required' | translate}}
        </mat-error>
        <mat-error *ngIf="deduplicationConfigForm.get('maxPendingMsgs').hasError('max')">
          {{'tb.rulenode.max-pending-msgs-max-error' | translate}}
        </mat-error>
        <mat-error *ngIf="deduplicationConfigForm.get('maxPendingMsgs').hasError('min')">
          {{'tb.rulenode.max-pending-msgs-min-error' | translate}}
        </mat-error>
      </mat-form-field>
      <mat-form-field class="mat-block" style="padding-bottom: 16px">
        <mat-label>{{'tb.rulenode.max-retries' | translate}}</mat-label>
        <input type = 'number' required matInput formControlName="maxRetries">
        <mat-hint>{{'tb.rulenode.max-retries-hint' | translate}}</mat-hint>
        <mat-error *ngIf="deduplicationConfigForm.get('maxRetries').hasError('required')">
          {{'tb.rulenode.max-retries-required' | translate}}
        </mat-error>
        <mat-error *ngIf="deduplicationConfigForm.get('maxRetries').hasError('max')">
          {{'tb.rulenode.max-retries-max-error' | translate}}
        </mat-error>
        <mat-error *ngIf="deduplicationConfigForm.get('maxRetries').hasError('min')">
          {{'tb.rulenode.max-retries-min-error' | translate}}
        </mat-error>
      </mat-form-field>
    </ng-template>
  </mat-expansion-panel>
</section>
